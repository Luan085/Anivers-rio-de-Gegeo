const siteData = {
    mae: {
        nome: "Georgia Nobréga de Souza",
        dataNascimento: "1981-09-19" 
    },
    filho: {
        nome: "Luan"
    },
    linhaDoTempo: [
        {
            ano: "19/09/1981",
            acontecimento: "Nesse dia surge uma linda menina, filha de um casal apaixonados, sendo a setima filha de Fernando e a primeira de Maria Aparecida.",
            imagens: ["geobb.jpg"] 
        },
        {
            ano: "1985",
            acontecimento: "Festinha de aniversário no colégio com minha turma e minha bisa",
            imagens: ["Escola.jpg"]
        },
        {
            ano: "1985",
            acontecimento: "Conhecendo a neve pela primeira vez",
            imagens: ["Neve.jpg"]
        },
        {
            ano:"1996",
            acontecimento: "Meus 15 anos",
            imagens:["euca.jpg"]
        },
        {
            ano:"1998",
            acontecimento: "Viagem com amigos",
            imagens:["Viagem 2.jpg","Viagem.jpg","Viagem 3.jpg"]
        },
        {
            ano: "2001",
            acontecimento: "Em meados de Janeiro, foi descoberto que eu estava chegando",
        },
        {
            ano: "2001",
            acontecimento: "Fotos da gravidez",
            imagens:["Mangueira.jpg","chuveiro.jpg","hosp.jpg"]
        },
        {
            ano:"28/12/2001",
            acontecimento: "Estava chegando a hora mais esperada do dia, o meu nascimento",
            imagens:["tias.jpg","trio.jpg","Maca.jpg"]
        },
        {
            ano:"Fotos",
            acontecimento:"após o parto",
            imagens:["IMG-20250915-WA0257.jpg","IMG-20250915-WA0260.jpg",]
        },
        {
            ano:"Fotos",
            acontecimento: "junto com mamãe",
            imagens:["IMG_6820.HEIC","IMG_6821.HEIC","IMG_6811.HEIC","IMG_6813.HEIC"]
        },
        {
            ano:"12/07/2021",
            acontecimento:"Despedida da melhor amiga",
            imagens:["Despedidat.png",]
        },
        {
            ano:"2021",
            acontecimento:"Viagem para boipeba",
            imagens:["boipeba.png","boipebam.png"]
        },
        {
            ano:"2021",
            acontecimento:"Chegada de pitoca",
            imagens:["ChegadaP.png"]
        },
        {
            ano:"2022",
            acontecimento:"Chegada de Nala e pitoquinha conhecendo ela",
            imagens:["chegadan.png","nala.png"]
        },
        {
            ano:"2022",
            acontecimento:"Susto na padaria: Erik falou que ficava um homem olhando pra padaria do outro lado da pista, ficamos na padaria até ele aparecer e chamarmos a policia.",
            imagens:["homemale.png"]
        },
        {
            ano:"2025",
            acontecimento:"Dia do casamento",
            imagens:["IMG-20250915-WA0227.jpg","casame.jpg", "td.jpg", "Captura de tela 2025-09-18 151116.png"]
        }
    ],
    historias: [
        {
            titulo: "Dia que ganhei Bentinho",
            categoria: "Surpresa",
            texto: "Desde pequeno eu implorava pra ter um cachorrinho. Certo dia estava na casa de meu pai e recebi uma ligação de minha mãe falando que tinha uma surpresa pra mim, eu fiquei agoniado criando mil coisas para voltar pra casa, acabou que consegui ir embora para ver qual era a surpresa, quando entrei no quarto vi uma caixa no chão e assim que abri com a maior esperança de ser um cachorro, vi que era um boneco do Bob Esponja, feito com esponja, fiquei na maior tristeza mas quando virei de costas tive a surpresa de verdade, um cachorrinho, pequeno, preto e marrom parecendo um ratinho, agradeci, fiquei extremamente feliz e então coloquei o nome dele de Bento de Souza L. da Silva Queiroz."       },
        {
            titulo: "Dia do xixi da janela!",
            categoria: "Engracada",
            texto: "Um dia, minha mãe tinha saido para trabalhar e como de costume eu ficava em casa sozinho depois que chegava do colégio e so podia descer depois que ela chegasse e conferisse minha lição de casa. Nesse dia estava chovendo bastante e com isso acabou que não descemos para jogar bola, ficou eu, Danilo, Lucas e Matheus cada um na sua janela de casa, surgiu então uma ideia vinda de Lucas de quem era o corajoso de mijar pela janela de casa e como sempre eu querendo ser o melhor fui la e aceitei, mijei pela janela e ai que foi o problema, Matheus disse que iria contar para minha mãe quando ela chegasse e eu o ameacei falando que se ele contasse eu iria bater nele. Deu por volta de 17:30, minha mãe chegou e assim que botou os pés na 'quadra' Matheus foi lá e contou, ela subiu, eu apanhei e ainda tive que ir de porta em porta contando o que eu tinha feito e se tivesse caido o xixi na casa de alguém eu teria que limpar com a língua."
        },
        {
            titulo:"A noite sem bêbê",
            categoria:"Triste",
            texto:"Tudo começou quando encontramos sangue na cama dos cachorros, achando que ela talvez estivesse no cio. Logo depois, notaram que o sangue, na verdade, vinha da boca de Bebê.A situação se tornou crítica à noite, quando ela tentou andar e mostrou extrema fraqueza, na hora que ela estava andando, cambaleou pra os lados e assim que a peguei ela desmaiou nos meus braços.Levada às pressas para a emergência veterinária, ela foi diagnosticada com a grave doença do carrapato e precisou ser internada. Voltamos para casa muito preocupados, passando uma noite de muita tristeza com Bentinho."
        },
    ],
    albumFotos:[
        "avo.jpg", "cafe.jpg", "carto.jpg", 
        "chuveiro.jpg", "chuverio 2.jpg", 
        "geobb.jpg",
        "bonfim.jpg", "casame.jpg", "bj.jpg",
        "cunha.jpg", "cacho.jpg", "cmae.jpg", "familia.jpg", 
        "cora.jpg", "conquis.jpg", "euca.jpg", 
        "cidinha.jpg", "cida.jpg", "Escola.jpg","IMG-20250915-WA0239.jpg", "IMG-20250915-WA0230.jpg",
        "IMG-20250915-WA0237.jpg", "IMG-20250915-WA0228.jpg", "IMG-20250915-WA0231.jpg", 
        "IMG-20250915-WA0235.jpg", "IMG-20250915-WA0227.jpg",
        "IMG-20250915-WA0232.jpg", "IMG-20250915-WA0236.jpg", "IMG-20250915-WA0226.jpg","noiva.jpg",
        "Viagem.jpg", "vo.jpg", "WhatsApp Image 2025-09-15 at 15.28.50_34ed3b83.jpg", "mico2.jpg", "td.jpg", "Neve.jpg",
        "WhatsApp Image 2025-09-15 at 15.29.06_309bc199.jpg", "mico.jpg", "Viagem 2.jpg","IMG-20250915-WA0293.jpg", "tiatamara.png",
        "trio.jpg", "trioltg.png","paifer.png","bebedor.png","reuniao.png","pitoca.png","tias.jpg","IMG-20250915-WA0222.jpg",
        "IMG-20250915-WA0224.jpg","IMG-20250915-WA0261.jpg","IMG-20250915-WA0292.jpg","IMG-20250915-WA0294.jpg","Maca.jpg",
        "Captura de tela 2025-09-18 151051.png","bentinho.png","Captura de tela 2025-09-18 151051.png"
    ]
};

let currentPageIndex = 0;
let albumImages = [];
let slideshowInterval = null; 
document.addEventListener('DOMContentLoaded', () => {
    carregarConteudo();
    iniciarCronometro();
});

function carregarConteudo() {
    const anoAniversario = new Date("2025-09-19T00:00:00").getFullYear();
    const anoNascimento = new Date(siteData.mae.dataNascimento).getFullYear();
    const idadeCelebrada = anoAniversario - anoNascimento;

    document.getElementById('titulo-principal').textContent = `Parabéns para a melhor mãe do mundo!`;
    document.getElementById('subtitulo-principal').textContent = `Celebrando a chegada dos seus ${idadeCelebrada} anos!`;

    const timelineContainer = document.getElementById('timeline-container');
    siteData.linhaDoTempo.forEach(item => {
        if (!item.ano) return;
        const itemDiv = document.createElement('div');
        itemDiv.className = 'timeline-item';
        let imagensHTML = "";
        if (item.imagens && item.imagens.length > 0) {
            imagensHTML = `<div class="timeline-images">` +
                item.imagens.map(img => `<img src="${img}" alt="Foto de ${item.acontecimento}">`).join('') +
                `</div>`;
        }
        itemDiv.innerHTML = `<div class="timeline-content"><h3>${item.ano}</h3><p>${item.acontecimento}</p>${imagensHTML}</div>`;
        timelineContainer.appendChild(itemDiv);
    });

    carregarAlbum();

    const storiesContainer = document.getElementById('stories-container');
    siteData.historias.forEach(historia => {
        const card = document.createElement('div');
        card.className = 'story-card';
        card.innerHTML = `<span class="tag ${historia.categoria}">${historia.categoria}</span><h3>${historia.titulo}</h3><p>${historia.texto}</p>`;
        storiesContainer.appendChild(card);
    });

    document.getElementById('autor-footer').textContent = `Feito com todo o carinho e amor por ${siteData.filho.nome}`;
}

function iniciarSlideshow() {
    clearInterval(slideshowInterval);
    slideshowInterval = setInterval(() => {
        currentPageIndex = (currentPageIndex + 1) % albumImages.length;
        mostrarPagina(currentPageIndex);
    }, 3000);
}

function carregarAlbum() {
    const pagesContainer = document.getElementById('photo-book-pages');
    const albumContainer = document.getElementById('photo-album-container');
    if (!siteData.albumFotos || siteData.albumFotos.length === 0) {
        albumContainer.style.display = 'none';
        return;
    }
    siteData.albumFotos.forEach(fotoSrc => {
        const img = document.createElement('img');
        img.src = fotoSrc;
        img.alt = `Foto de ${siteData.mae.nome}`;
        pagesContainer.appendChild(img);
    });
    albumImages = pagesContainer.getElementsByTagName('img');
 
    document.getElementById('prev-page').addEventListener('click', () => {
        currentPageIndex = (currentPageIndex - 1 + albumImages.length) % albumImages.length;
        mostrarPagina(currentPageIndex);
        if (albumImages.length > 1) iniciarSlideshow();
    });

    document.getElementById('next-page').addEventListener('click', () => {
        currentPageIndex = (currentPageIndex + 1) % albumImages.length;
        mostrarPagina(currentPageIndex);
        if (albumImages.length > 1) iniciarSlideshow();
    });

    mostrarPagina(0);

    if (albumImages.length > 1) {
        iniciarSlideshow();

        albumContainer.addEventListener('mouseenter', () => clearInterval(slideshowInterval));

        albumContainer.addEventListener('mouseleave', iniciarSlideshow);
    }
}

function mostrarPagina(index) {
    for (let i = 0; i < albumImages.length; i++) {
        albumImages[i].classList.remove('active');
    }
    albumImages[index].classList.add('active');
    document.getElementById('page-counter').textContent = `${index + 1} / ${albumImages.length}`;
    
    const navButtonsVisible = albumImages.length > 1;
    document.getElementById('prev-page').style.display = navButtonsVisible ? 'block' : 'none';
    document.getElementById('next-page').style.display = navButtonsVisible ? 'block' : 'none';
}

function iniciarCronometro() {
    const dataAniversario = new Date("2025-09-19T00:00:00");
    
    const countdownElement = document.getElementById('countdown');
    const diasEl = document.getElementById('dias');
    const horasEl = document.getElementById('horas');
    const minutosEl = document.getElementById('minutos');
    const segundosEl = document.getElementById('segundos');

    const intervalo = setInterval(() => {
        const agora = new Date().getTime();
        const distancia = dataAniversario - agora;

        if (distancia < 0) {
            clearInterval(intervalo);
            countdownElement.innerHTML = `Hoje é o seu dia! <br> Parabéns, mãe! Eu te amo.`;
            countdownElement.style.fontSize = "1.8rem";
            countdownElement.style.lineHeight = "1.4";
            return;
        }
        const dias = Math.floor(distancia / (1000 * 60 * 60 * 24));
        const horas = Math.floor((distancia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutos = Math.floor((distancia % (1000 * 60 * 60)) / (1000 * 60));
        const segundos = Math.floor((distancia % (1000 * 60)) / 1000);

        const formataTempo = (tempo) => tempo < 10 ? `0${tempo}` : tempo;

        diasEl.innerText = formataTempo(dias);
        horasEl.innerText = formataTempo(horas);
        minutosEl.innerText = formataTempo(minutos);
        segundosEl.innerText = formataTempo(segundos);
    }, 1000);
}